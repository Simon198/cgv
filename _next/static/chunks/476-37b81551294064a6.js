"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{5638:function(t,e,r){var i;r.d(e,{HR:function(){return C},Jy:function(){return J}}),function(t){t[t.Float=0]="Float",t[t.Enum=1]="Enum",t[t.Int=2]="Int"}(i||(i={}));var n=r(6431),a=r(598),o=r(7340),s=r(5770),c=r(9621),u=r(2910),l=r(6173);r(1135);const m=new l.Vector3,h=new l.Vector3;new l.Matrix4;var p;!function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"}(p||(p={}));const f={[p.X]:"x",[p.Y]:"y",[p.Z]:"z"};function x(t,e){return t[f[e]]}function d(t,e,r){t[f[e]]=r}const g=new l.Vector3;function v(t,e,r){t.getGeometrySize(g);let i=0;const n=[];for(h.set(0,0,0);x(g,e)>0;){const a=t.matrix.clone();a.multiply((0,c.Nh)(h.x,h.y,h.z));const o=r(a,i,g.x,g.y,g.z);o.getGeometrySize(m),n.push(o),i++;const s=x(m,e);d(g,e,x(g,e)-s),d(h,e,x(h,e)+s)}return n}new l.Vector3;var y=r(2253);function b(t){return t.pipe((0,n.b)(console.log),(0,a.U)((t=>(0,s.Au)(t,(t=>t.parameters.blockId.pipe((0,a.U)((e=>Object.assign(Object.assign({},t),{value:e})))))))),(0,s.PA)(),(0,s.fX)(10),(0,s.Jh)(),(0,n.b)(console.log))}const w=new l.Vector3;function G([t,e]){return t.primitive.getGeometrySize(w),(0,o.of)(w[e])}function M([t,e,r]){const i=e-t;let n=Math.random()*i+t;return null!=r&&(n=Math.floor(n/r)*r),(0,o.of)(n)}function j([t,e,r,i]){return(0,o.of)({attributes:Object.assign({},t.attributes),primitive:t.primitive.multiplyMatrix((0,c.gN)(e,r,i))})}function O(t){return Math.PI*t/180}function P([t,e,r,i]){return(0,o.of)({attributes:Object.assign({},t.attributes),primitive:t.primitive.multiplyMatrix((0,c.ae)(O(e),O(r),O(i)))})}function S([t,e,r,i]){return(0,o.of)({attributes:Object.assign({},t.attributes),primitive:t.primitive.multiplyMatrix((0,c.Nh)(e,r,i))})}function A([t,e]){return(0,o.of)({attributes:Object.assign({},t.attributes),primitive:t.primitive.changeMaterialGenerator((0,u.i7)(e))})}function T([t,e]){return(0,o.of)({attributes:Object.assign({},t.attributes),primitive:t.primitive.extrude(e)})}function V(t,e){return(0,o.of)(e.reduce(((e,r)=>[...e,...r.primitive.components(t).map((t=>({attributes:Object.assign({},r.attributes),primitive:t})))]),[]))}const F=V.bind(null,"points"),L=V.bind(null,"lines"),N=V.bind(null,"faces");function z([t,e,r]){return(0,o.of)(v(t.primitive,p.Z,((i,n,a,o,s)=>{if(null==r||n<r){const r=Math.min(e,s);return u.Js.fromLengthAndHeight(i,a,r,!1,t.primitive.materialGenerator)}return u.Js.fromLengthAndHeight(i,a,s,!1,t.primitive.materialGenerator)})).map((e=>({attributes:Object.assign({},t.attributes),primitive:e}))))}function H([t,e,r]){return(0,o.of)(v(t.primitive,p.X,((i,n,a,o,s)=>{if(null==r||n<r){const r=Math.min(e,a);return u.Js.fromLengthAndHeight(i,r,s,!1,t.primitive.materialGenerator)}return u.Js.fromLengthAndHeight(i,a,s,!1,t.primitive.materialGenerator)})).map((e=>({attributes:Object.assign({},t.attributes),primitive:e}))))}function X([t,...e]){return(0,o.of)(v(t.primitive,p.X,((r,i,n,a,o)=>{const s=e[i];return null!=s&&n>s?u.Js.fromLengthAndHeight(r,s,o,!1,t.primitive.materialGenerator):u.Js.fromLengthAndHeight(r,n,o,!1,t.primitive.materialGenerator)})).map((e=>({attributes:Object.assign({},t.attributes),primitive:e}))))}function k([t,...e]){return(0,o.of)(v(t.primitive,p.Z,((r,i,n,a,o)=>{const s=e[i];return null!=s&&o>s?u.Js.fromLengthAndHeight(r,n,s,!1,t.primitive.materialGenerator):u.Js.fromLengthAndHeight(r,n,o,!1,t.primitive.materialGenerator)})).map((e=>({attributes:Object.assign({},t.attributes),primitive:e}))))}const J=Object.assign(Object.assign({},y.J),{translate:t=>e=>e.pipe((0,s.dF)(S,(t=>t),[s.fT,...t],void 0,[4])),scale:t=>e=>e.pipe((0,s.dF)(j,(t=>t),[s.fT,...t],void 0,[4])),rotate:t=>e=>e.pipe((0,s.dF)(P,(t=>t),[s.fT,...t],void 0,[4])),extrude:t=>e=>e.pipe((0,s.dF)(T,(t=>t),[s.fT,...t],void 0,[2])),splitX:t=>e=>e.pipe((0,s.dF)(H,(t=>t),[s.fT,...t],void 0,[2,3])),splitZ:t=>e=>e.pipe((0,s.dF)(z,(t=>t),[s.fT,...t],void 0,[2,3])),multiSplitX:t=>e=>e.pipe((0,s.dF)(X,(t=>t),[s.fT,...t])),multiSplitZ:t=>e=>e.pipe((0,s.dF)(k,(t=>t),[s.fT,...t])),points:t=>e=>e.pipe((0,s.dF)(F,(t=>t),[s.fT,...t])),lines:t=>e=>e.pipe((0,s.dF)(L,(t=>t),[s.fT,...t])),faces:t=>e=>e.pipe((0,s.dF)(N,(t=>t),[s.fT,...t])),random:t=>e=>e.pipe((0,s.dF)(M,void 0,[...t],void 0,[2])),color:t=>e=>e.pipe((0,s.dF)(A,void 0,[s.fT,...t],void 0,[2])),size:t=>e=>e.pipe((0,s.dF)(G,void 0,[s.fT,...t],void 0,[2])),block:()=>b});var E=r(2598);function C(){return t=>t.pipe((0,s.PA)(),(0,s.Tr)(),(0,E.R)(((t,e)=>{var r;for(const i of e){let e;if(i.type===s.u4.UNSET)e=t.children.splice(i.index,i.deleteAmount);else{const n=i.value.value.primitive.getObject();null===(r=n.parent)||void 0===r||r.remove(n),n.parent=t,e=t.children.splice(i.index,i.deleteAmount,n)}for(const t of e)t.parent=null}return t}),new l.Object3D))}},9621:function(t,e,r){r.d(e,{pT:function(){return s},Nh:function(){return c},ae:function(){return u},gN:function(){return l}});var i=r(6173);new i.Box3,new i.Vector3,new i.Vector3;const n=new i.Matrix4,a=new i.Vector3,o=new i.Euler;function s(t,e,r=n){return a.crossVectors(t,e),r.makeBasis(t,e,a)}function c(t,e,r,i=n){return i.makeTranslation(t,e,r)}function u(t,e,r,i=n){return i.makeRotationFromEuler(o.set(t,e,r))}function l(t,e,r,i=n){return i.makeScale(t,e,r)}},2910:function(t,e,r){r.d(e,{i7:function(){return o},Yh:function(){return f},Js:function(){return v},Jn:function(){return b}});var i=r(6173),n=r(766),a=r(9621);function o(t){return e=>{switch(e){case l.Point:return new i.PointsMaterial({color:t});case l.Line:return new i.LineBasicMaterial({color:t});case l.Mesh:return new i.MeshPhongMaterial({color:t})}}}const s=new i.Matrix4,c=new i.Vector3;function u(t,e){return t.matrixAutoUpdate=!1,t.matrix=e,t}var l;!function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Mesh=2]="Mesh"}(l||(l={}));class m{constructor(){this.geometryCache=null,this.objectCache=null}getGeometry(){return null===this.geometryCache&&(this.geometryCache=this.computeGeometry()),this.geometryCache}getObject(){return null===this.objectCache&&(this.objectCache=this.computeObject3D()),this.objectCache}dispose(){var t;null===(t=this.geometryCache)||void 0===t||t.dispose()}multiplyMatrix(t){return this.changeMatrix(this.matrix.clone().multiply(t))}premultiplyMatrix(t){return this.changeMatrix(this.matrix.clone().premultiply(t))}}class h extends m{constructor(t,e){super(),this.matrix=t,this.materialGenerator=e}changeMaterialGenerator(t){return new h(this.matrix,t)}changeMatrix(t){return new h(t,this.materialGenerator)}multiplyMatrix(t){return new h(this.matrix.clone().multiply(t),this.materialGenerator)}getGeometrySize(t){t.set(0,0,0)}extrude(t){return new f(this.matrix,t,this.materialGenerator)}components(t){return"points"===t?[this.clone()]:[]}computeObject3D(){return u(new i.Points((new i.BufferGeometry).setFromPoints([new i.Vector3]),this.materialGenerator(l.Point)),this.matrix)}clone(){return new h(this.matrix,this.materialGenerator)}computeGeometry(){}}const p=new i.Vector3(0,1,0);class f extends m{constructor(t,e,r){super(),this.matrix=t,this.length=e,this.materialGenerator=r}changeMaterialGenerator(t){return new f(this.matrix,this.length,t)}changeMatrix(t){return new f(t,this.length,this.materialGenerator)}static fromPoints(t,e,r,i){t.multiply((0,a.Nh)(e.x,0,e.y)),d.copy(r).sub(e);const n=d.length();return t.multiply((0,a.pT)(c.set(d.x,0,d.y).normalize(),p)),new f(t,n,i)}getGeometrySize(t){t.set(0,this.length,0)}clone(){return new f(this.matrix,this.length,this.materialGenerator)}extrude(t){return v.fromLengthAndHeight(this.matrix,this.length,t,!0,this.materialGenerator)}components(t){switch(t){case"faces":return[];case"lines":return[this.clone()];case"points":{const t=new h(this.matrix,this.materialGenerator);return t.multiplyMatrix(s.makeTranslation(0,this.length,0)),[new h(this.matrix,this.materialGenerator),t]}}}computeObject3D(){return u(new i.Line((new i.BufferGeometry).setFromPoints([new i.Vector3,new i.Vector3(this.length,0,0)]),this.materialGenerator(l.Line)),this.matrix)}computeGeometry(){}}const x=new i.Box2,d=new i.Vector2,g=new i.Matrix4;class v extends m{constructor(t,e,r){super(),this.matrix=t,this.shape=e,this.materialGenerator=r}changeMaterialGenerator(t){return new v(this.matrix,this.shape,t)}changeMatrix(t){return new v(t,this.shape,this.materialGenerator)}static fromLengthAndHeight(t,e,r,n,a){n&&t.multiply(s.makeRotationX(-Math.PI/2));const o=[new i.Vector2(e,0),new i.Vector2(e,r),new i.Vector2(0,r),new i.Vector2(0,0)],c=new i.Shape(o);return new v(t,c,a)}getGeometrySize(t){x.setFromPoints(this.shape.getPoints()).getSize(d),t.set(d.x,0,d.y)}computeGeometry(){const t=new i.ShapeBufferGeometry(this.shape);let e;for(let r=0;r<t.index.count;r+=3)e=t.index.getX(r),t.index.setX(r,t.index.getX(r+2)),t.index.setX(r+2,e);return t.rotateX(Math.PI/2),t}invert(){const t=this.matrix.clone();t.multiply((0,a.ae)(Math.PI,0,0));const e=this.shape.getPoints(5),r=this.shape.holes,n=new i.Shape(e.map((({x:t,y:e})=>new i.Vector2(t,-e))));return n.holes=r.map((t=>new i.Path(t.getPoints().map((({x:t,y:e})=>new i.Vector2(t,-e)))))),new v(t,n,this.materialGenerator)}extrude(t){g.copy(this.matrix).invert();const e=this.multiplyMatrix(g.multiply((0,a.Nh)(0,t,0))),r=this.shape.extractPoints(5).shape;return new b(this.matrix,[...r.map(((e,n)=>{const o=r[(n+1)%r.length];c.set(o.x-e.x,0,o.y-e.y);const s=c.length(),u=(0,a.Nh)(e.x,0,e.y,new i.Matrix4);u.multiply((0,a.pT)(c.normalize(),p));const l=v.fromLengthAndHeight(u,s,t,!0,this.materialGenerator);return t<0?l.invert():l})),e])}components(t){switch(t){case"points":return this.shape.extractPoints(5).shape.map((t=>new h(this.matrix.clone().multiply((0,a.Nh)(t.x,0,t.y)),this.materialGenerator)));case"lines":{const t=this.shape.extractPoints(5).shape;return t.map(((e,r)=>f.fromPoints(this.matrix.clone(),e,t[(r+1)%t.length],this.materialGenerator)))}case"faces":return[this]}}computeObject3D(){return u(new i.Mesh(this.getGeometry(),this.materialGenerator(l.Mesh)),this.matrix)}}const y=new i.Box3;class b extends m{constructor(t,e){super(),this.matrix=t,this.primitives=e}changeMaterialGenerator(t){return new b(this.matrix,this.primitives.map((e=>e.changeMaterialGenerator(t))))}changeMatrix(t){return new b(t,this.primitives)}extrude(t){return new b(this.matrix,this.primitives.map((e=>e.extrude(t))))}components(t){return this.primitives.map((e=>e.components(t))).reduce(((t,e)=>t.concat(e))).map((t=>t.premultiplyMatrix(this.matrix)))}computeObject3D(){const t=u(new i.Object3D,this.matrix);return this.primitives.forEach((e=>t.add(e.getObject()))),t}getGeometrySize(t){y.makeEmpty(),this.primitives.forEach((t=>{t.getGeometrySize(c),c.applyMatrix4(t.matrix),y.expandByPoint(c)})),y.getSize(t)}computeGeometry(){const t=this.primitives.map((t=>{var e;return null===(e=t.getGeometry())||void 0===e?void 0:e.applyMatrix4(t.matrix)})).filter(w),e=(0,n.qf)(t);return t.forEach((t=>t.dispose())),e}}function w(t){return null!=t}},7939:function(t,e,r){r.d(e,{T:function(){return l}});var i=r(5893),n=r(406),a=r(6447),o=r(5638),s=r(7294);function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,a=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(i=r.next()).done)&&(a.push(i.value),!e||a.length!==e);o=!0);}catch(c){s=!0,n=c}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return a}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){var e=t.matrix,r=(0,s.useState)([void 0,void 0]),c=u(r[0],2),l=c[0],m=c[1],h=r[1];return(0,s.useEffect)((function(){if(null!=e){var t=e.pipe((0,o.HR)()).subscribe({next:function(t){return h([t,void 0])},error:function(t){return h([void 0,t.message])}});return function(){return t.unsubscribe()}}}),[e]),(0,i.jsxs)("div",{style:{whiteSpace:"pre-line"},className:"flex-basis-0 d-flex flex-column flex-grow-1 bg-white h3 mb-0",children:[(0,i.jsx)("div",{className:"flex-basis-0 flex-grow-1 overflow-hidden position-relative",children:(0,i.jsxs)(a.Xz,{children:[(0,i.jsx)(n.o,{}),(0,i.jsx)("gridHelper",{}),(0,i.jsx)("pointLight",{position:[3,3,3]}),(0,i.jsx)("ambientLight",{}),(0,i.jsx)("group",{scale:.01,children:null!=l&&(0,i.jsx)("primitive",{object:l})})]})}),(0,i.jsx)("div",{className:"overflow-auto mb-0 border-top flex-basis-0 h5 bg-light flex-grow-1",style:{whiteSpace:"pre-line",maxHeight:300,height:300},children:null==m?null==e?(0,i.jsx)("div",{className:"text-primary p-3",children:"waiting ..."}):(0,i.jsx)("div",{className:"text-success p-3",children:"ok"}):(0,i.jsx)("div",{className:"text-danger p-3",children:m})})]})}},8377:function(t,e,r){r.d(e,{c:function(){return a}});var i=r(5770),n=r(7294);function a(t,e,r){return(0,n.useMemo)((function(){try{var n=(0,i.Qc)(t);return[e.pipe((0,i.Ii)(n,r)),void 0]}catch(a){return[void 0,JSON.stringify(a.message)]}}),[t,e])}}}]);