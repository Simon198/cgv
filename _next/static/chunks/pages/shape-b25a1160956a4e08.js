(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5999:function(r,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shape",function(){return t(4513)}])},4513:function(r,e,t){"use strict";t.r(e),t.d(e,{default:function(){return $}});var n=t(5893),o=t(5638),a=t(9008),i=t(7294),u=t(5770),l=t(6173),c=t(4051),f=t.n(c),s=t(2744),y=t(3614),p=t.n(y);function m(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function d(r,e,t,n,o,a,i){try{var u=r[a](i),l=u.value}catch(c){return void t(c)}u.done?e(l):Promise.resolve(l).then(n,o)}function h(r){return function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(r){d(a,n,o,i,u,"next",r)}function u(r){d(a,n,o,i,u,"throw",r)}i(void 0)}))}}function v(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function b(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){v(r,e,t[e])}))}return r}function w(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,u=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return m(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(){return(g=h(f().mark((function r(){var e,t,n;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("/22545.mvt");case 2:return e=r.sent,r.next=5,e.arrayBuffer();case 5:return t=r.sent,n=new s.VectorTile(new(p())(t)),r.abrupt("return",Object.entries(n.layers).reduce((function(r,e){var t=w(e,2),n=t[0],o=t[1];return b({},r,v({},n,new Array(o.length).fill(null).map((function(r,e){var t=o.feature(e);return{properties:t.properties,geometry:t.loadGeometry()}}))))}),{}));case 8:case"end":return r.stop()}}),r)})))).apply(this,arguments)}var x=t(7340),j=t(6562),S=t(8816),A=t(892),O=t(598),_=t(2910);function N(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function C(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,u=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(r,e)||I(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(r){return function(r){if(Array.isArray(r))return N(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||I(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(r,e){if(r){if("string"===typeof r)return N(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(r,e):void 0}}var k={layer:(0,x.of)("road")},P={layer:(0,x.of)("building")},M=(0,_.i7)(new l.Color(16711680));function T(){return(0,i.useMemo)((function(){return null==t.g.window?j.C:(0,S.D)(function(){return g.apply(this,arguments)}()).pipe((0,A.d)({bufferSize:1,refCount:!0}),(0,O.U)((function(r){var e=function(r){return r.road.filter((function(r){return"street"===r.properties.class})).reduce((function(r,e){return r.concat(e.geometry.map((function(r){return[new _.Jn(new l.Matrix4,r.slice(0,-1).map((function(e,t){var n=r[(t+1)%r.length];return _.Yh.fromPoints(new l.Matrix4,new l.Vector2(e.x,e.y),new l.Vector2(n.x,n.y),M)}))),k]})))}),[])}(r),t=function(r){return r.building.reduce((function(r,e){return r.concat(e.geometry.map((function(r){return[new _.Js(new l.Matrix4,new l.Shape(r.map((function(r){var e=r.x,t=r.y;return new l.Vector2(e,t)}))),M),P]})))}),[])}(r),n=E(e).concat(E(t)).map((function(r,e){var t=C(r,2),n=t[0];return{terminated:!1,eventDepthMap:{},parameters:t[1],value:{path:[e],attributes:{},primitive:n}}}));return(0,u.a_)(n,n.length)})))}),[])}var V=t(7939),U=t(8377);function D(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function J(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,u=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return D(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(){var r=(0,i.useState)(""),e=r[0],t=r[1],u=T(),l=J((0,U.c)(e,u,o.Jy),2),c=l[0],f=l[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.default,{children:[(0,n.jsx)("title",{children:"CGV | Editor"}),(0,n.jsx)("meta",{name:"description",content:""}),(0,n.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,n.jsxs)("div",{className:"d-flex responsive-flex-direction",style:{width:"100vw",height:"100vh"},children:[(0,n.jsx)(V.T,{matrix:c}),(0,n.jsxs)("div",{className:"d-flex flex-column flex-basis-0 flex-grow-1",children:[(0,n.jsx)("textarea",{style:{resize:"none",outline:0},value:e,spellCheck:!1,onChange:function(r){return t(r.target.value)},className:"overflow-auto p-3 flex-basis-0 h3 mb-0 text-light border-0 bg-dark flex-grow-1"}),(0,n.jsx)("div",{className:"overflow-auto p-3 flex-basis-0 h3 mb-0 bg-black flex-grow-1",style:{whiteSpace:"pre-line",maxHeight:300},children:null==f?null==c?(0,n.jsx)("span",{className:"text-primary",children:"loading ..."}):(0,n.jsx)("span",{className:"text-success",children:"ok"}):(0,n.jsx)("span",{className:"text-danger",children:f})})]})]})]})}}},function(r){r.O(0,[429,913,578,990,253,476,774,888,179],(function(){return e=5999,r(r.s=e);var e}));var e=r.O();_N_E=e}]);