(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5999:function(r,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shape",function(){return t(4513)}])},4513:function(r,e,t){"use strict";t.r(e),t.d(e,{default:function(){return J}});var n=t(5893),o=t(5638),a=t(9008),i=t(7294),u=t(6173),l=t(4051),c=t.n(l),f=t(2744),s=t(3614),y=t.n(s);function p(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function m(r,e,t,n,o,a,i){try{var u=r[a](i),l=u.value}catch(c){return void t(c)}u.done?e(l):Promise.resolve(l).then(n,o)}function d(r){return function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(r){m(a,n,o,i,u,"next",r)}function u(r){m(a,n,o,i,u,"throw",r)}i(void 0)}))}}function h(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function v(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){h(r,e,t[e])}))}return r}function b(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,u=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return p(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(){return(w=d(c().mark((function r(){var e,t,n;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("/22545.mvt");case 2:return e=r.sent,r.next=5,e.arrayBuffer();case 5:return t=r.sent,n=new f.VectorTile(new(y())(t)),r.abrupt("return",Object.entries(n.layers).reduce((function(r,e){var t=b(e,2),n=t[0],o=t[1];return v({},r,h({},n,new Array(o.length).fill(null).map((function(r,e){var t=o.feature(e);return{properties:t.properties,geometry:t.loadGeometry()}}))))}),{}));case 8:case"end":return r.stop()}}),r)})))).apply(this,arguments)}var g=t(7340),x=t(6562),j=t(8816),S=t(892),A=t(598),O=t(2910);function N(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function _(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,u=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(r,e)||E(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(r){return function(r){if(Array.isArray(r))return N(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||E(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(r,e){if(r){if("string"===typeof r)return N(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(r,e):void 0}}var I={layer:(0,g.of)("road")},k={layer:(0,g.of)("building")},P=(0,O.i7)(new u.Color(16711680));function M(){return(0,i.useMemo)((function(){return null==t.g.window?x.C:(0,j.D)(function(){return w.apply(this,arguments)}()).pipe((0,S.d)({bufferSize:1,refCount:!0}),(0,A.U)((function(r){var e=function(r){return r.road.filter((function(r){return"street"===r.properties.class})).reduce((function(r,e){return r.concat(e.geometry.map((function(r){return[new O.Jn(new u.Matrix4,r.slice(0,-1).map((function(e,t){var n=r[(t+1)%r.length];return O.Yh.fromPoints(new u.Matrix4,new u.Vector2(e.x,e.y),new u.Vector2(n.x,n.y),P)}))),I]})))}),[])}(r),t=function(r){return r.building.reduce((function(r,e){return r.concat(e.geometry.map((function(r){return[new O.Js(new u.Matrix4,new u.Shape(r.map((function(r){var e=r.x,t=r.y;return new u.Vector2(e,t)}))),P),k]})))}),[])}(r);return C(e).concat(C(t)).map((function(r,e){var t=_(r,2),n=t[0];return{terminated:!1,eventDepthMap:{},parameters:t[1],value:{path:[e],attributes:{},primitive:n}}}))})))}),[])}var T=t(7939),V=t(8377);function U(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function D(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,u=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return U(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return U(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(){var r=(0,i.useState)(""),e=r[0],t=r[1],u=M(),l=D((0,V.c)(e,u,o.Jy),2),c=l[0],f=l[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.default,{children:[(0,n.jsx)("title",{children:"CGV | Editor"}),(0,n.jsx)("meta",{name:"description",content:""}),(0,n.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,n.jsxs)("div",{className:"d-flex responsive-flex-direction",style:{width:"100vw",height:"100vh"},children:[(0,n.jsx)(T.T,{matrix:c}),(0,n.jsxs)("div",{className:"d-flex flex-column flex-basis-0 flex-grow-1",children:[(0,n.jsx)("textarea",{style:{resize:"none",outline:0},value:e,spellCheck:!1,onChange:function(r){return t(r.target.value)},className:"overflow-auto p-3 flex-basis-0 h3 mb-0 text-light border-0 bg-dark flex-grow-1"}),(0,n.jsx)("div",{className:"overflow-auto p-3 flex-basis-0 h3 mb-0 bg-black flex-grow-1",style:{whiteSpace:"pre-line",maxHeight:300},children:null==f?null==c?(0,n.jsx)("span",{className:"text-primary",children:"loading ..."}):(0,n.jsx)("span",{className:"text-success",children:"ok"}):(0,n.jsx)("span",{className:"text-danger",children:f})})]})]})]})}}},function(r){r.O(0,[429,189,578,990,253,476,774,888,179],(function(){return e=5999,r(r.s=e);var e}));var e=r.O();_N_E=e}]);